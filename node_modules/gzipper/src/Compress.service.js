"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CompressService = void 0;
var Brotli_1 = require("./compressions/Brotli");
var Deflate_1 = require("./compressions/Deflate");
var Gzip_1 = require("./compressions/Gzip");
var constants_1 = require("./constants");
var CompressService = /** @class */ (function () {
    /**
     * Creates an instance of CompressService.
     */
    function CompressService(options) {
        this.options = options;
    }
    /**
     * Return compression instance.
     */
    CompressService.prototype.getCompressionInstance = function () {
        if (this.options.brotli) {
            return new Brotli_1.BrotliCompression(this.options);
        }
        else if (this.options.deflate) {
            return new Deflate_1.DeflateCompression(this.options);
        }
        else {
            return new Gzip_1.GzipCompression(this.options);
        }
    };
    /**
     * Returns if the file extension is valid.
     */
    CompressService.prototype.isValidFileExtensions = function (ext) {
        if (constants_1.COMPRESSION_EXTENSIONS.includes(ext)) {
            return false;
        }
        var excludeExtensions = this.options.exclude;
        var includeExtensions = this.options.include;
        if (includeExtensions === null || includeExtensions === void 0 ? void 0 : includeExtensions.length) {
            return includeExtensions.includes(ext);
        }
        if (excludeExtensions === null || excludeExtensions === void 0 ? void 0 : excludeExtensions.length) {
            return !excludeExtensions.includes(ext);
        }
        return true;
    };
    return CompressService;
}());
exports.CompressService = CompressService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcHJlc3Muc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Db21wcmVzcy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLGdEQUEwRDtBQUMxRCxrREFBNEQ7QUFDNUQsNENBQXNEO0FBQ3RELHlDQUFxRDtBQUdyRDtJQUdFOztPQUVHO0lBQ0gseUJBQVksT0FBd0I7UUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7SUFDekIsQ0FBQztJQUVEOztPQUVHO0lBQ0ksZ0RBQXNCLEdBQTdCO1FBSUUsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtZQUN2QixPQUFPLElBQUksMEJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQzVDO2FBQU0sSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRTtZQUMvQixPQUFPLElBQUksNEJBQWtCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQzdDO2FBQU07WUFDTCxPQUFPLElBQUksc0JBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDMUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSSwrQ0FBcUIsR0FBNUIsVUFBNkIsR0FBVztRQUN0QyxJQUFJLGtDQUFzQixDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUN4QyxPQUFPLEtBQUssQ0FBQztTQUNkO1FBRUQsSUFBTSxpQkFBaUIsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUMvQyxJQUFNLGlCQUFpQixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO1FBRS9DLElBQUksaUJBQWlCLGFBQWpCLGlCQUFpQix1QkFBakIsaUJBQWlCLENBQUUsTUFBTSxFQUFFO1lBQzdCLE9BQU8saUJBQWlCLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3hDO1FBRUQsSUFBSSxpQkFBaUIsYUFBakIsaUJBQWlCLHVCQUFqQixpQkFBaUIsQ0FBRSxNQUFNLEVBQUU7WUFDN0IsT0FBTyxDQUFDLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN6QztRQUVELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNILHNCQUFDO0FBQUQsQ0FBQyxBQS9DRCxJQStDQztBQS9DWSwwQ0FBZSJ9