"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.extractId = extractId;

var _clientLogger = require("@storybook/client-logger");

// extract a story id
function extractId(_ref) {
  var id = _ref.id,
      name = _ref.name;
  var allocatedIds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

  if (id) {
    return id;
  }

  var generated = name.replace(/\W+(.)/g, function (_, chr) {
    return chr.toUpperCase();
  });

  if (allocatedIds.indexOf(generated) >= 0) {
    _clientLogger.logger.warn("Story name conflict with exports - Please add an explicit id for story ".concat(name));

    generated += hashCode(name);
  }

  return generated;
}

function hashCode(str) {
  return str.split('').reduce(function (prevHash, currVal) {
    return (prevHash << 5) - prevHash + currVal.charCodeAt(0) | 0;
  }, 0) // eslint-disable-line
  .toString(16);
}