import global from 'global';
import PreviewRender from './PreviewRender.svelte';
const {
  document
} = global;
let previousComponent = null;

function cleanUpPreviousStory() {
  if (!previousComponent) {
    return;
  }

  previousComponent.$destroy();
  previousComponent = null;
}

export default function render({
  storyFn,
  kind,
  name,
  showMain,
  showError
}) {
  cleanUpPreviousStory();
  const target = document.getElementById('root');
  target.innerHTML = '';
  previousComponent = new PreviewRender({
    target,
    props: {
      storyFn,
      name,
      kind,
      showError
    }
  });
  showMain();
}